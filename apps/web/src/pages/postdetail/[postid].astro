---
import AuthorInfo from "../../components/AuthorInfo.vue";
import Layout from "../../layouts/Layout.astro";
const { postid } = Astro.params;

const response = await fetch(`https://dummyjson.com/posts/${postid}`);
const postDetail = await response.json();

const userResponse = await fetch(
  `https://dummyjson.com/users/${postDetail.userId}`
);

const userDetail = await userResponse.json();
---

<Layout title="Post detail">
  <div class="hero min-h-screen max-h-screen bg-base-200">
    <div class="hero-content text-center">
      <div class="max-w-md">
        <h1 class="text-5xl font-bold">{postDetail.title}</h1>
        <p class="py-6">
          {postDetail.body}
        </p>
        {
          postDetail.tags.map((tag: string) => (
            <button class="btn btn-dark ml-2 hover:cursor-default">
              {tag}
            </button>
          ))
        }
        <AuthorInfo userDetail={userDetail} client:only />
      </div>
    </div>
  </div>
</Layout>
